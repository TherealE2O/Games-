<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>WebRTC Clap Game</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <div id="app-container">
        <div style="margin-bottom: 20px; text-align: left;">
            <a href="/" style=" 
                display: inline-block;
                padding: 10px 15px; /* Slightly smaller than main buttons */
                margin: 5px;
                background-color: #7f8c8d; /* Neutral gray */
                color: white;
                text-decoration: none;
                border-radius: 6px;
                font-size: 0.9em;
                box-shadow: 0 2px 4px rgba(0,0,0,0.1);
            ">‚Üê Back to Hub</a>
        </div>
        <h1>WebRTC Clap Game</h1>

        <div class="controls-section">
            <h2>1. Setup & Call</h2>
            <button id="webcamButton">Start Webcam</button>
            <div class="video-container">
                <div>
                    <h3>Local Video</h3>
                    <video id="webcamVideo" muted autoplay playsinline></video>
                </div>
                <div>
                    <h3>Remote Video</h3>
                    <video id="remoteVideo" autoplay playsinline></video>
                </div>
            </div>

            <div class="call-controls">
                <input type="text" id="callInput" placeholder="Enter Call ID to answer" />
                <button id="callButton" disabled>Create Call</button>
                <button id="answerButton" disabled>Answer Call</button>
                <button id="hangupButton" disabled>Hang Up</button>
            </div>
        </div>

        <div class="game-section">
            <div class="game-info" style="display: none;">
                <h2>Game Info</h2>
                <p>Category: <span id="currentCategory">Not set</span></p>
                <p>Current Player: <span id="currentPlayer">N/A</span></p>
                <p>Time Remaining: <span id="timeRemaining">N/A</span>s</p>
                <h3>Players:</h3>
                <ul id="playerList"></ul>
            </div>

            <div class="game-actions" style="display: none;">
                <h2>Game Actions</h2>
                <div class="action-group">
                    <input type="text" id="categoryInput" placeholder="Enter category">
                    <button id="setCategoryButton">Set Category</button>
                </div>
                <div class="action-group">
                    <button id="startGameButton" disabled>Start Game</button>
                </div>
                <div class="action-group">
                    <input type="text" id="nameInput" placeholder="Enter item name" disabled>
                    <button id="submitNameButton" disabled>Submit Name</button>
                </div>
                <div class="action-group">
                    <button id="callOutButton">Call Out!</button>
                </div>
            </div>
        </div>

        <div class="log-section">
            <h2>Game Log</h2>
            <ul id="gameLog"></ul>
        </div>
        
        <div class="help-section">
            <button id="toggleHelpButton">Toggle Help</button>
            <div id="helpContent" style="display: none;">
                <h3>How to Play:</h3>
                <ol>
                    <li><strong>Start Webcam:</strong> Click "Start Webcam" and allow permissions. Your name will be prompted.</li>
                    <li><strong>Connect:</strong>
                        <ul>
                            <li><strong>To Create a Call:</strong> Click "Create Call". Share the generated Call ID with the other player.</li>
                            <li><strong>To Answer a Call:</strong> Paste the Call ID received from the other player into the "Enter Call ID" field and click "Answer Call".</li>
                        </ul>
                    </li>
                    <li>Once connected, one player sets the <strong>Category</strong>.</li>
                    <li>Click <strong>Start Game</strong>.</li>
                    <li>When it's your turn, the "Enter item name" field will be active. Type an item fitting the category and click "Submit Name". You must say the name, clap, then say it again (the app simulates the clap).</li>
                    <li>If you think the current player made a mistake (e.g., repeated an item, item doesn't fit category, took too long), click <strong>"Call Out!"</strong>.</li>
                    <li>The game continues until players decide to stop or hang up.</li>
                </ol>
            </div>
        </div>

        <audio id="clapAudio" src="https://www.soundjay.com/human/sounds/clap-1.mp3" preload="auto"></audio>
        <!-- You might want to host your own clap sound or find a royalty-free one -->
    </div>

    <script type="module" src="/main.js"></script>
</body>
</html>